# å°ˆæ¡ˆæ¶æ§‹æ¦‚è¦½ ğŸ—ï¸

æœ¬æ–‡æª”æä¾›ã€Œå‡ºé–€é»é»åã€App çš„æ•´é«”æ¶æ§‹èªªæ˜å’Œä»£ç¢¼å°èˆªæŒ‡å—ã€‚

## ğŸ“Š ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     User Interface                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ HomeScreen   â”‚              â”‚ SettingsScreenâ”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      React Navigation (è·¯ç”±)             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     Zustand Store (ç‹€æ…‹ç®¡ç†)          â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
        â”‚  â”‚  - checklists                â”‚    â”‚
        â”‚  â”‚  - activeChecklistId         â”‚    â”‚
        â”‚  â”‚  - settings                  â”‚    â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ AsyncStorage â”‚   â”‚ Push Notificationâ”‚
        â”‚ (æŒä¹…åŒ–å­˜å„²)  â”‚   â”‚  (æœ¬åœ°é€šçŸ¥)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—‚ ç›®éŒ„çµæ§‹è©³è§£

### `/src/components/` - UI çµ„ä»¶å±¤

å¯å¾©ç”¨çš„ UI çµ„ä»¶ï¼Œéµå¾ªåŸå­è¨­è¨ˆåŸå‰‡ï¼š

- **Button.tsx**: é€šç”¨æŒ‰éˆ•çµ„ä»¶
  - æ”¯æŒå¤šç¨®æ¨£å¼è®Šé«” (primary, warning, success, outline)
  - å…§å»º loading å’Œ disabled ç‹€æ…‹
  
- **ChecklistItemCard.tsx**: æ¸…å–®é …ç›®å¡ç‰‡
  - å‹¾é¸æ¡†äº¤äº’
  - å…§è¯ç·¨è¼¯åŠŸèƒ½
  - æ‹–æ‹½æ”¯æŒ
  - åˆªé™¤ç¢ºèª
  
- **Header.tsx**: é é¢é ­éƒ¨çµ„ä»¶
  - å·¦å³æŒ‰éˆ•æ’æ§½
  - æ¨™é¡Œå±…ä¸­é¡¯ç¤º
  
- **AddItemInput.tsx**: æ·»åŠ é …ç›®è¼¸å…¥æ¡†
  - å¿«é€Ÿè¼¸å…¥ç•Œé¢
  - é©—è­‰èˆ‡éŒ¯èª¤æç¤º

### `/src/screens/` - é é¢çµ„ä»¶å±¤

æ‡‰ç”¨çš„ä¸»è¦é é¢ï¼š

- **HomeScreen.tsx**: ä¸»é é¢
  - æ¸…å–®å±•ç¤ºèˆ‡ç®¡ç†
  - æ‹–æ‹½æ’åºåŠŸèƒ½
  - é€²åº¦æ¢é¡¯ç¤º
  - ä¸€éµé‡ç½®åŠŸèƒ½
  
- **SettingsScreen.tsx**: è¨­ç½®é é¢
  - é€šçŸ¥è¨­ç½®
  - æ™‚é–“é¸æ“‡å™¨
  - æ¬Šé™ä¿¡æ¯å±•ç¤º
  - é—œæ–¼æ‡‰ç”¨ä¿¡æ¯

### `/src/store/` - ç‹€æ…‹ç®¡ç†å±¤

ä½¿ç”¨ Zustand é€²è¡Œå…¨å±€ç‹€æ…‹ç®¡ç†ï¼š

- **useAppStore.ts**: ä¸»ç‹€æ…‹ç®¡ç†å™¨
  ```typescript
  interface AppStore {
    // ç‹€æ…‹
    checklists: Checklist[]
    activeChecklistId: string | null
    settings: AppSettings
    isLoading: boolean
    
    // æ¸…å–®æ“ä½œ
    createChecklist, deleteChecklist, updateChecklistName
    setActiveChecklist
    
    // æ¸…å–®é …ç›®æ“ä½œ
    addItem, deleteItem, updateItem
    toggleItemCheck, resetAllItems, reorderItems
    
    // è¨­ç½®æ“ä½œ
    updateNotificationSettings, updateUserPermission
    
    // æŒä¹…åŒ–
    initialize, saveToStorage
  }
  ```

#### ç‹€æ…‹ç®¡ç†æµç¨‹

1. **åˆå§‹åŒ–æµç¨‹**:
   ```
   App å•Ÿå‹• â†’ initialize() â†’ å¾ AsyncStorage è®€å– â†’ è¨­ç½®åˆå§‹ç‹€æ…‹
   ```

2. **æ•¸æ“šæ›´æ–°æµç¨‹**:
   ```
   ç”¨æˆ¶æ“ä½œ â†’ èª¿ç”¨ Store Action â†’ æ›´æ–°ç‹€æ…‹ â†’ saveToStorage()
   ```

3. **é€šçŸ¥èª¿åº¦æµç¨‹**:
   ```
   æ›´æ–°é€šçŸ¥è¨­ç½® â†’ scheduleDailyNotification() â†’ ç³»çµ±é€šçŸ¥
   ```

### `/src/utils/` - å·¥å…·å‡½æ•¸å±¤

å„ç¨®è¼”åŠ©å·¥å…·æ¨¡çµ„ï¼š

- **storage.ts**: AsyncStorage å°è£
  - `saveData<T>`: ä¿å­˜æ•¸æ“š
  - `getData<T>`: è®€å–æ•¸æ“š
  - `removeData`: åˆªé™¤æ•¸æ“š
  - æä¾›é¡å‹å®‰å…¨çš„å­˜å„²æ“ä½œ

- **notification.ts**: é€šçŸ¥ç®¡ç†
  - `initializeNotifications`: åˆå§‹åŒ–é€šçŸ¥ç³»çµ±
  - `scheduleDailyNotification`: èª¿åº¦æ¯æ—¥é€šçŸ¥
  - `requestNotificationPermission`: è«‹æ±‚æ¬Šé™
  - `sendTestNotification`: ç™¼é€æ¸¬è©¦é€šçŸ¥

- **permission.ts**: æ¬Šé™æ§åˆ¶ï¼ˆé ç•™ä»˜è²»åŠŸèƒ½ï¼‰
  - `canCreateChecklist`: æª¢æŸ¥æ˜¯å¦å¯å‰µå»ºæ¸…å–®
  - `isPremiumUser`: æª¢æŸ¥æ˜¯å¦ç‚ºä»˜è²»ç”¨æˆ¶
  - `upgradeToPremium`: å‡ç´šæ¥å£ï¼ˆå¾…å¯¦ç¾ï¼‰

- **helpers.ts**: é€šç”¨è¼”åŠ©å‡½æ•¸
  - `generateId`: ç”Ÿæˆå”¯ä¸€ ID
  - `formatTime`: æ™‚é–“æ ¼å¼åŒ–
  - `throttle`, `debounce`: æ€§èƒ½å„ªåŒ–å‡½æ•¸

### `/src/types/` - é¡å‹å®šç¾©å±¤

TypeScript é¡å‹å®šç¾©ï¼š

```typescript
// æ ¸å¿ƒæ•¸æ“šé¡å‹
ChecklistItem     // æ¸…å–®é …ç›®
Checklist         // æ¸…å–®
NotificationSettings // é€šçŸ¥è¨­ç½®
UserPermission    // ç”¨æˆ¶æ¬Šé™æšèˆ‰
AppSettings       // æ‡‰ç”¨è¨­ç½®
AppState          // æ‡‰ç”¨ç‹€æ…‹
```

### `/src/constants/` - å¸¸é‡é…ç½®å±¤

- **colors.ts**: é…è‰²æ–¹æ¡ˆ
  - éµå¾ªè¦æ ¼æ›¸å®šç¾©çš„ 5 è‰²ç³»çµ±
  
- **config.ts**: æ‡‰ç”¨é…ç½®
  - å­˜å„²éµå
  - é»˜èªå€¼
  - æ¬Šé™é™åˆ¶
  - App ä¿¡æ¯

## ğŸ”„ æ•¸æ“šæµç¨‹åœ–

### æ·»åŠ æ¸…å–®é …ç›®æµç¨‹

```
ç”¨æˆ¶è¼¸å…¥é …ç›®åç¨±
    â†“
AddItemInput.onAdd()
    â†“
useAppStore.addItem(checklistId, title)
    â†“
å‰µå»ºæ–° ChecklistItem å°è±¡
    â†“
æ›´æ–° store.checklists ç‹€æ…‹
    â†“
saveToStorage() â†’ AsyncStorage
    â†“
UI è‡ªå‹•æ›´æ–°ï¼ˆReact é‡æ–°æ¸²æŸ“ï¼‰
```

### å‹¾é¸é …ç›®æµç¨‹

```
ç”¨æˆ¶é»æ“Šå‹¾é¸æ¡†
    â†“
ChecklistItemCard.onToggle()
    â†“
useAppStore.toggleItemCheck(checklistId, itemId)
    â†“
åˆ‡æ› item.checked ç‹€æ…‹
    â†“
saveToStorage()
    â†“
UI æ›´æ–°ï¼ˆé¡¯ç¤ºå‹¾é¸ç‹€æ…‹ + é€²åº¦æ¢æ›´æ–°ï¼‰
```

### æ‹–æ‹½æ’åºæµç¨‹

```
ç”¨æˆ¶é•·æŒ‰æ‹–æ‹½é …ç›®
    â†“
DraggableFlatList.onDragEnd({data})
    â†“
useAppStore.reorderItems(checklistId, newItems)
    â†“
æ›´æ–°æ¯å€‹ item.order
    â†“
saveToStorage()
    â†“
UI æ›´æ–°ï¼ˆæ–°é †åºï¼‰
```

### é€šçŸ¥è¨­ç½®æµç¨‹

```
ç”¨æˆ¶æ›´æ”¹é€šçŸ¥è¨­ç½®
    â†“
SettingsScreen.updateNotificationSettings()
    â†“
useAppStore.updateNotificationSettings(enabled, time)
    â†“
æ›´æ–° settings.notification
    â†“
scheduleDailyNotification(settings.notification)
    â†“
ç³»çµ±èª¿åº¦æœ¬åœ°é€šçŸ¥
    â†“
saveToStorage()
```

## ğŸ¨ æ¨£å¼ç³»çµ±

### NativeWind + Tailwind CSS

ä½¿ç”¨ NativeWind å°‡ Tailwind CSS æ‡‰ç”¨æ–¼ React Nativeï¼š

```tsx
// Tailwind é¡åç›´æ¥ç”¨æ–¼ React Native çµ„ä»¶
<View className="bg-primary p-4 rounded-lg shadow-sm">
  <Text className="text-white font-bold text-lg">
    æ¨™é¡Œ
  </Text>
</View>
```

### é…è‰²æ–¹æ¡ˆä½¿ç”¨

```tsx
// æ–¹å¼ 1: ä½¿ç”¨ Tailwind é¡åï¼ˆæ¨è–¦ï¼‰
<View className="bg-primary">

// æ–¹å¼ 2: ä½¿ç”¨å¸¸é‡ï¼ˆéœ€è¦ style propï¼‰
import {COLORS} from '@constants/colors';
<View style={{backgroundColor: COLORS.primary}}>
```

### ä¸»é¡Œé¡è‰²æ˜ å°„

| Tailwind é¡å | HEX å€¼ | ç”¨é€” |
|--------------|---------|------|
| `bg-primary` | #0ABAB5 | ä¸»è‰²èƒŒæ™¯ |
| `text-primary` | #0ABAB5 | ä¸»è‰²æ–‡å­— |
| `bg-success` | #5CB85C | æˆåŠŸè‰² |
| `bg-warning` | #FF6347 | è­¦å‘Šè‰² |
| `bg-background` | #F4F4F4 | é é¢èƒŒæ™¯ |
| `text-textPrimary` | #333333 | ä¸»è¦æ–‡å­— |

## ğŸ” æ¬Šé™ç³»çµ±è¨­è¨ˆ

### ç•¶å‰ç‹€æ…‹

- **å…è²»ç‰ˆ**: é™åˆ¶ 1 å€‹æ¸…å–®
- **ä»˜è²»ç‰ˆ**: ç„¡é™æ¸…å–® + é›²ç«¯åŒæ­¥ï¼ˆé ç•™ï¼‰
- **å¯¦ç¾ç‹€æ…‹**: æ¬Šé™å…¨é–‹å•Ÿï¼ˆç”¨æˆ¶è¦æ±‚ï¼‰

### æ¬Šé™æª¢æŸ¥é»

```typescript
// å‰µå»ºæ¸…å–®å‰æª¢æŸ¥
const canCreate = canCreateChecklist(
  checklists.length,
  settings.userPermission
);

if (!canCreate) {
  // é¡¯ç¤ºå‡ç´šæç¤º
  showUpgradePrompt();
}
```

### æœªä¾†æ“´å±•

æ¬Šé™ç³»çµ±å·²é ç•™æ¥å£ï¼Œå¯è¼•é¬†å°æ¥ï¼š

1. **IAP (In-App Purchase)**: 
   - iOS: StoreKit
   - Android: Google Play Billing

2. **é›²ç«¯åŒæ­¥**:
   - Firebase Firestore
   - æˆ–è‡ªå»ºå¾Œç«¯ API

## ğŸ“± é€šçŸ¥ç³»çµ±è¨­è¨ˆ

### é€šçŸ¥é »é“ (Android)

```javascript
{
  channelId: 'check-me-out-channel',
  channelName: 'æ¯æ—¥æé†’',
  importance: 4,  // é«˜é‡è¦æ€§
  vibrate: true,
  sound: 'default'
}
```

### é€šçŸ¥èª¿åº¦é‚è¼¯

```javascript
// è§£æç”¨æˆ¶è¨­ç½®çš„æ™‚é–“ (å¦‚ "08:00")
const scheduledTime = parseTimeString(settings.notification.time);

// å¦‚æœä»Šå¤©çš„æ™‚é–“å·²éï¼Œèª¿åº¦åˆ°æ˜å¤©
if (scheduledTime <= now) {
  scheduledTime.setDate(scheduledTime.getDate() + 1);
}

// èª¿åº¦é‡è¤‡é€šçŸ¥
PushNotification.localNotificationSchedule({
  date: scheduledTime,
  repeatType: 'day',  // æ¯å¤©é‡è¤‡
  // ...å…¶ä»–é…ç½®
});
```

## ğŸ§ª æ¸¬è©¦ç­–ç•¥

### å–®å…ƒæ¸¬è©¦

- ä½¿ç”¨ Jest + React Native Testing Library
- æ¸¬è©¦è¦†è“‹å·¥å…·å‡½æ•¸å’Œ Store actions

### é›†æˆæ¸¬è©¦

- æ¸¬è©¦å®Œæ•´ç”¨æˆ¶æµç¨‹
- é€šçŸ¥èª¿åº¦æ¸¬è©¦
- æ•¸æ“šæŒä¹…åŒ–æ¸¬è©¦

### E2E æ¸¬è©¦ï¼ˆæœªä¾†ï¼‰

- Detox æˆ– Appium
- çœŸæ©Ÿæ¸¬è©¦é€šçŸ¥åŠŸèƒ½

## ğŸš€ æ€§èƒ½å„ªåŒ–

### å·²å¯¦ç¾

1. **ç‹€æ…‹ç®¡ç†**: Zustand (è¼•é‡ç´šï¼Œç„¡ Provider åœ°ç„)
2. **åˆ—è¡¨æ¸²æŸ“**: FlatList è™›æ“¬åŒ–
3. **æŒä¹…åŒ–**: AsyncStorage ç•°æ­¥æ“ä½œ
4. **æ‹–æ‹½**: react-native-draggable-flatlist (é«˜æ€§èƒ½)

### å¯å„ªåŒ–é»ï¼ˆæœªä¾†ï¼‰

1. **åœ–ç‰‡å„ªåŒ–**: react-native-fast-image
2. **å¤§åˆ—è¡¨**: FlashList
3. **ç‹€æ…‹é¸æ“‡å™¨**: ä½¿ç”¨ useShallow é¿å…é‡æ¸²æŸ“
4. **å»¶é²åŠ è¼‰**: React.lazy + Suspense

## ğŸ“¦ ä¾è³´ç®¡ç†

### æ ¸å¿ƒä¾è³´

- React Native: è·¨å¹³å°æ¡†æ¶
- TypeScript: é¡å‹å®‰å…¨
- Zustand: ç‹€æ…‹ç®¡ç†
- NativeWind: æ¨£å¼ç³»çµ±
- AsyncStorage: æœ¬åœ°å­˜å„²
- React Navigation: è·¯ç”±å°èˆª

### åŠŸèƒ½ä¾è³´

- react-native-push-notification: é€šçŸ¥
- react-native-draggable-flatlist: æ‹–æ‹½
- @react-native-community/datetimepicker: æ™‚é–“é¸æ“‡

### é–‹ç™¼ä¾è³´

- ESLint: ä»£ç¢¼æª¢æŸ¥
- Prettier: ä»£ç¢¼æ ¼å¼åŒ–
- Jest: æ¸¬è©¦æ¡†æ¶

## ğŸ”§ é–‹ç™¼æœ€ä½³å¯¦è¸

### ä»£ç¢¼çµ„ç¹”

1. **å–®ä¸€è·è²¬**: æ¯å€‹æ–‡ä»¶åªè² è²¬ä¸€å€‹åŠŸèƒ½
2. **æ¨¡çµ„åŒ–**: ä½¿ç”¨ index.ts çµ±ä¸€å°å‡º
3. **é¡å‹å®‰å…¨**: æ‰€æœ‰å‡½æ•¸éƒ½æœ‰æ˜ç¢ºé¡å‹å®šç¾©
4. **æ³¨é‡‹**: æ¯å€‹æ–‡ä»¶é ­éƒ¨æœ‰ç”¨é€”èªªæ˜

### å‘½åè¦ç¯„

- **çµ„ä»¶**: PascalCase (Button.tsx)
- **å·¥å…·å‡½æ•¸**: camelCase (generateId)
- **å¸¸é‡**: UPPER_SNAKE_CASE (STORAGE_KEYS)
- **é¡å‹**: PascalCase (ChecklistItem)

### Git æäº¤è¦ç¯„ï¼ˆå»ºè­°ï¼‰

```
feat: æ–°å¢åŠŸèƒ½
fix: ä¿®å¾© bug
docs: æ–‡æª”æ›´æ–°
style: ä»£ç¢¼æ ¼å¼èª¿æ•´
refactor: ä»£ç¢¼é‡æ§‹
test: æ¸¬è©¦ç›¸é—œ
chore: æ§‹å»º/å·¥å…·éˆæ›´æ–°
```

## ğŸ“š å­¸ç¿’è³‡æº

- [React Native å®˜æ–¹æ–‡æª”](https://reactnative.dev/)
- [Zustand æ–‡æª”](https://docs.pmnd.rs/zustand/)
- [NativeWind æ–‡æª”](https://www.nativewind.dev/)
- [TypeScript æ‰‹å†Š](https://www.typescriptlang.org/docs/)

---

**æŒçºŒæ›´æ–°ä¸­...** å¦‚æœ‰ç–‘å•ï¼Œè«‹æŸ¥é–±ç›¸é—œæºä»£ç¢¼æˆ–æ–‡æª”ã€‚

